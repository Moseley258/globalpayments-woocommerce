{"version":3,"file":"gateways.js","mappings":"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","sources":["webpack://globalpayments-woocommerce/./resources/js/frontend/components/helper.js","webpack://globalpayments-woocommerce/./resources/js/frontend/components/savedTokenComponent.js","webpack://globalpayments-woocommerce/./resources/js/frontend/components/threeDSecureComponent.js","webpack://globalpayments-woocommerce/./resources/js/frontend/gateways/component.js","webpack://globalpayments-woocommerce/./resources/js/frontend/utils/register.js","webpack://globalpayments-woocommerce/external window \"React\"","webpack://globalpayments-woocommerce/external window [\"wc\",\"wcBlocksRegistry\"]","webpack://globalpayments-woocommerce/external window [\"wc\",\"wcSettings\"]","webpack://globalpayments-woocommerce/external window [\"wp\",\"htmlEntities\"]","webpack://globalpayments-woocommerce/webpack/bootstrap","webpack://globalpayments-woocommerce/webpack/runtime/compat get default export","webpack://globalpayments-woocommerce/webpack/runtime/define property getters","webpack://globalpayments-woocommerce/webpack/runtime/hasOwnProperty shorthand","webpack://globalpayments-woocommerce/webpack/runtime/make namespace object","webpack://globalpayments-woocommerce/./resources/js/frontend/gateways/index.js"],"sourcesContent":["const getElement = ( selector ) => {\r\n\treturn document.querySelector( selector );\r\n};\r\n\r\nconst getAllElements = ( selector ) => {\r\n\treturn document.querySelectorAll( selector );\r\n};\r\n\r\nconst addClass = ( element, className ) => {\r\n\telement?.classList.add( className );\r\n\r\n\treturn element;\r\n};\r\n\r\nconst removeClass = ( element, className ) => {\r\n\telement?.classList.remove( className );\r\n\r\n\treturn element;\r\n};\r\n\r\nconst hideElement = ( element ) => {\r\n\tif (element?.style) {\r\n\t\telement.style.display = 'none';\r\n\t}\r\n\r\n\treturn element;\r\n};\r\n\r\nconst showElement = ( element ) => {\r\n\tif (element?.style) {\r\n\t\telement.style.display = '';\r\n\t}\r\n\r\n\treturn element;\r\n};\r\n\r\nlet params = {};\r\n\r\n /**\r\n * Get order info\r\n */\r\nconst getOrderInfo = () => {\r\n\thelper_functions.blockOnSubmit();\r\n\r\n\tfetch( params.orderInfoUrl )\r\n\t.then( ( res ) => res.json() )\r\n\t.then( ( result ) => {\r\n\t\tparams.order = result.message;\r\n\t} )\r\n\t.catch( ( jqXHR, textStatus, errorThrown ) => {\r\n\t\tconsole.log(errorThrown);\r\n\t} )\r\n\t.finally( () => {\r\n\t\thelper_functions.unblockOnError();\r\n\t} );\r\n};\r\n\r\nexport const helper = ( helper_params ) => {\r\n\tparams = helper_params;\r\n\r\n\tgetOrderInfo();\r\n\r\n\treturn {\r\n\t\t...helper_functions,\r\n\t\torder: params.order\r\n\t};\r\n};\r\n\r\nconst helper_functions = {\r\n\t/**\r\n\t * Convenience function to get CSS selector for the built-in 'Place Order' button\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tgetPlaceOrderButtonSelector: () => {\r\n\t\treturn '.wc-block-components-checkout-place-order-button';\r\n\t},\r\n\r\n\t/**\r\n\t * Convenience function to get CSS selector for the custom 'Place Order' button's parent element\r\n\t *\r\n\t * @param {string} id\r\n\t * @returns {string}\r\n\t */\r\n\tgetSubmitButtonTargetSelector: ( id ) => {\r\n\t\treturn '#' + id + '-card-submit';\r\n\t},\r\n\r\n\t/**\r\n\t * Convenience function to get CSS selector for the radio input associated with our payment method\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tgetPaymentMethodRadioSelector: ( id ) => {\r\n\t\treturn '#payment-method input[id*=\"radio-control-wc-payment-method-options-' + id + '\"]';\r\n\t},\r\n\r\n\t/**\r\n\t * Convenience function to get CSS selector for stored card radio inputs\r\n\t *\r\n\t * @returns {string}\r\n\t */\r\n\tgetStoredPaymentMethodsRadioSelector: () => {\r\n\t\treturn '#payment-method input[id*=\"radio-control-wc-payment-method-saved-tokens-\"]:checked';\r\n\t},\r\n\r\n\tisOnlyGatewayMethodDisplayed: ( id ) => {\r\n\t\tconst list = [ ...getAllElements( '#payment-method input[id*=\"radio-control-wc-payment-method-\"]' ) ];\r\n\t\tconst gateway = getElement( helper_functions.getPaymentMethodRadioSelector( id ) );\r\n\t\treturn list.includes( gateway ) && list.length === 1;\r\n\t},\r\n\tisFirstPaymentMethod: ( id ) => {\r\n\t\treturn document.querySelector('#payment-method input').value === id;\r\n\t},\r\n\r\n\t/**\r\n\t * Swaps the default WooCommerce 'Place Order' button for our iframe-d button\r\n\t * or digital wallet buttons when one of our gateways is selected.\r\n\t *\r\n\t * @returns\r\n\t */\r\n\ttoggleSubmitButtons: () => {\r\n\t\tconst selectedPaymentGatewayId = getElement( '#payment-method input[id*=\"radio-control-wc-payment-method-options-\"]:checked' )?.value;\r\n\t\tremoveClass( getElement( '.globalpayments.card-submit' ), 'is-active' );\r\n\r\n\t\tif ( params.hide.includes( selectedPaymentGatewayId ) ) {\r\n\t\t\thelper_functions.hidePlaceOrderButton();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( ! params.toggle.includes( selectedPaymentGatewayId ) ) {\r\n\t\t\thelper_functions.showPlaceOrderButton();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst submitButtonTarget = getElement( '#' + selectedPaymentGatewayId + '-card-submit' );\r\n\r\n\t\t// stored Cards available (registered user selects stored card as payment method)\r\n\t\tconst savedCardsAvailable = getElement( helper_functions.getStoredPaymentMethodsRadioSelector() );\r\n\r\n\t\t// user selects (new) card as payment method\r\n\t\tconst newSavedCardSelected = selectedPaymentGatewayId === getElement( helper_functions.getStoredPaymentMethodsRadioSelector() + ':checked' )?.value;\r\n\r\n\t\t// selected payment method is card or digital wallet\r\n\t\tif ( ! savedCardsAvailable || savedCardsAvailable && newSavedCardSelected ) {\r\n\t\t\taddClass( submitButtonTarget, 'is-active' );\r\n\t\t\thelper_functions.hidePlaceOrderButton();\r\n\t\t} else {\r\n\t\t\t// selected payment method is stored card\r\n\t\t\thideElement( submitButtonTarget );\r\n\t\t\thelper_functions.showPlaceOrderButton();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Hide the default WooCommerce 'Place Order' button.\r\n\t */\r\n\thidePlaceOrderButton: () => {\r\n\t\thideElement( addClass( getElement( helper_functions.getPlaceOrderButtonSelector() ), 'woocommerce-globalpayments-hidden' ) );\r\n\t},\r\n\r\n\t/**\r\n\t * Show the default WooCommerce 'Place Order' button.\r\n\t */\r\n\tshowPlaceOrderButton: () => {\r\n\t\tshowElement( removeClass( getElement( helper_functions.getPlaceOrderButtonSelector() ), 'woocommerce-globalpayments-hidden' ) );\r\n\t},\r\n\r\n\t/**\r\n\t * Gets the current checkout form\r\n\t *\r\n\t * @returns {Element}\r\n\t */\r\n\tgetFormSelector: () => {\r\n\t\treturn 'form.wc-block-components-form.wc-block-checkout__form';\r\n\t},\r\n\r\n\tcreateInputElement: ( id, name, value ) => {\r\n\t\tlet inputElement = ( document.getElementById( id + '-' + name ) );\r\n\r\n\t\tif ( ! inputElement ) {\r\n\t\t\tinputElement = document.createElement( 'input' );\r\n\t\t\tinputElement.id = id + '-' + name;\r\n\t\t\tinputElement.name = id + '[' + name + ']';\r\n\t\t\tinputElement.type = 'hidden';\r\n\t\t\tgetElement( helper_functions.getFormSelector() ).appendChild( inputElement );\r\n\t\t}\r\n\r\n\t\tinputElement.value = value;\r\n\t},\r\n\r\n\t/**\r\n\t * Creates the parent for the submit button\r\n\t *\r\n\t * @returns\r\n\t */\r\n\tcreateSubmitButtonTarget: ( id ) => {\r\n\t\tconst el = document.createElement( 'div' );\r\n\t\tel.id = helper_functions.getSubmitButtonTargetSelector( id ).replace( '#', '' );\r\n\t\tel.className = 'globalpayments ' + id + ' card-submit';\r\n\r\n\t\tconst elem = getElement( helper_functions.getPlaceOrderButtonSelector() );\r\n\t\telem?.parentNode.insertBefore( el, elem.nextSibling );\r\n\t\t// match the visibility of our payment form\r\n\t\thelper_functions.toggleSubmitButtons( id );\r\n\t},\r\n\r\n\t/**\r\n\t * Places/submits the order to Woocommerce\r\n\t *\r\n\t * Attempts to click the default 'Place Order' button that is used by payment methods.\r\n\t * This is to account for other plugins taking action based on that click event, even\r\n\t * though there are usually better options. If anything fails during that process,\r\n\t * we fall back to calling `this.placeOrder` manually.\r\n\t *\r\n\t * @returns\r\n\t */\r\n\tplaceOrder: () => {\r\n\t\ttry {\r\n\t\t\tconst originalSubmit = getElement( helper_functions.getPlaceOrderButtonSelector() );\r\n\t\t\tif ( originalSubmit ) {\r\n\t\t\t\toriginalSubmit.click();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t} catch ( e ) {\r\n\t\t\t/* om nom nom */\r\n\t\t}\r\n\r\n\t\tgetElement( helper_functions.getFormSelector() ).submit();\r\n\t},\r\n\r\n\t/**\r\n\t * Shows payment error and scrolls to it\r\n\t *\r\n\t * @param {string} message Error message\r\n\t *\r\n\t * @returns\r\n\t */\r\n\tshowPaymentError: ( message ) => {\r\n\t\tconst form = getElement( helper_functions.getFormSelector() );\r\n\r\n\t\t// Remove notices from all sources\r\n\t\tgetElement( '.woocommerce-NoticeGroup, .woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-globalpayments-checkout-error' )?.remove();\r\n\r\n\t\tif ( -1 === message.indexOf( 'woocommerce-error' ) ) {\r\n\t\t\tmessage = '<ul class=\"woocommerce-error\"><li>' + message + '</li></ul>';\r\n\t\t}\r\n\t\tform?.prepend( '<div class=\"woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout woocommerce-globalpayments-checkout-error\">' + message + '</div>' );\r\n\r\n\t\tgetElement( 'html, body' ).animate( {\r\n\t\t\tscrollTop: ( form.offsetTop - 100 )\r\n\t\t}, 1000 );\r\n\r\n\t\thelper_functions.unblockOnError();\r\n\r\n\t\tdocument.body.dispatchEvent( new Event( 'checkout_error' ) );\r\n\t},\r\n\r\n\t/**\r\n\t * Blocks checkout UI\r\n\t *\r\n\t * Implementation pulled from `woocommerce/assets/js/frontend/checkout.js`\r\n\t *\r\n\t * @returns\r\n\t */\r\n\tblockOnSubmit: () => {\r\n\t\tconst $form = getElement( helper_functions.getFormSelector() );\r\n\t\tconst form_data = $form.data?.();\r\n\t\tif ( 1 !== form_data?.['blockUI.isBlocked'] ) {\r\n\t\t\t$form.block?.(\r\n\t\t\t\t{\r\n\t\t\t\t\tmessage: null,\r\n\t\t\t\t\toverlayCSS: {\r\n\t\t\t\t\t\tbackground: '#fff',\r\n\t\t\t\t\t\topacity: 0.6\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Unblocks checkout UI\r\n\t *\r\n\t * @returns\r\n\t */\r\n\tunblockOnError: () => {\r\n\t\tgetElement( helper_functions.getFormSelector() )?.unblock?.();\r\n\t},\r\n\thidePaymentMethod: ( id ) => {\r\n\t\thideElement( getElement( '#payment-method #radio-control-wc-payment-method-options-' + id ) );\r\n\t},\r\n\t/**\r\n\t * Note: if 'setPaymentMethodData' is called multiple times will override previous data\r\n\t * thus we call it once with all the data\r\n\t */\r\n\tsetPaymentMethodData: ( data ) => {\r\n\t\twindow.wp.data.dispatch( window.wc.wcBlocksData.PAYMENT_STORE_KEY ).__internalSetPaymentMethodData( data );\r\n\t},\r\n\tdispatchInfo: ( { message, context = 'gp-wp-context', cb = null } ) => {\r\n\t\twindow.wp.data.dispatch( 'core/notices' ).createInfoNotice( message, {\r\n\t\t\tcontext,\r\n\t\t} );\r\n\r\n\t\tcb?.();\r\n\t},\r\n\tdispatchError: ( { message, context = 'gp-wp-context', cb = null } ) => {\r\n\t\twindow.wp.data.dispatch( 'core/notices' ).createErrorNotice( message, {\r\n\t\t\tcontext,\r\n\t\t} );\r\n\r\n\t\tcb?.();\r\n\t},\r\n\thasValidationErrors: () => {\r\n\t\treturn window.wp.data.select( window.wc.wcBlocksData.VALIDATION_STORE_KEY ).hasValidationErrors();\r\n\t}\r\n};\r\n","import { getSetting } from '@woocommerce/settings';\r\nimport { helper as gp_helper } from \"../components/helper\";\r\nimport { useEffect } from 'react';\r\nimport { threeDSecure } from './threeDSecureComponent';\r\n\r\nconst state = {\r\n\tsettings: null,\r\n\tonSubmit: null,\r\n\tserverTransId: '',\r\n};\r\n\r\nlet helper = {};\r\nexport const SavedTokenComponent = ( props ) => {\r\n\tconst { id, onSubmit, eventRegistration } = props;\r\n\tstate.onSubmit = onSubmit;\r\n\r\n\tconst settings = getSetting( id + '_data', {} );\r\n\thelper = gp_helper( settings.helper_params );\r\n\r\n\tstate.settings = settings;\r\n\tstate.threedsecure = settings.threedsecure;\r\n\r\n\tconst { onCheckoutFail } = eventRegistration;\r\n\r\n\tuseEffect( () => {\r\n\t\twindow.onload = () => {\r\n\t\t\tattachEventHandlers();\r\n\t\t};\r\n\r\n\t\tconst unsubscribeOnCheckoutFail = onCheckoutFail( () => {\r\n\t\t\tunblockFormElements();\r\n\t\t\tremoveSpinnerFromPlaceOrderButton();\r\n\t\t} );\r\n\r\n\t\treturn () => {\r\n\t\t\tunsubscribeOnCheckoutFail();\r\n\t\t};\r\n\t}, [ onCheckoutFail ] );\r\n\r\n\tconst { StoreNoticesContainer } = window.wc.blocksCheckout;\r\n\r\n\treturn <StoreNoticesContainer context=\"gp-wp-context\" />;\r\n};\r\n\r\nconst attachEventHandlers = () => {\r\n\t// When clicked check if the selected payment method is a stored one then handle placing order\r\n\tdocument.querySelector( helper.getPlaceOrderButtonSelector() ).addEventListener( 'click', ( e ) => {\r\n\t\tif ( document.querySelector( helper.getStoredPaymentMethodsRadioSelector() ) ) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\thandlePlaceOrder();\r\n\t\t}\r\n\t} );\r\n};\r\n\r\nconst addSpinnerToPlaceOrderButton = () => {\r\n\tconst el = document.querySelector( helper.getPlaceOrderButtonSelector() );\r\n\tconst span = document.createElement( 'span' );\r\n\tspan.id = 'wc-block-components-spinner';\r\n\tspan.classList.add('wc-block-components-spinner');\r\n\tel.appendChild( span );\r\n};\r\n\r\nconst removeSpinnerFromPlaceOrderButton = () => {\r\n\tdocument.querySelector( '#wc-block-components-spinner' )?.remove();\r\n};\r\n\r\nconst blockFormElements = () => {\r\n\tdocument.querySelector( helper.getFormSelector() ).classList.add( 'wc-block-components-checkout-step--disabled' );\r\n\tdocument.querySelectorAll( `${ helper.getFormSelector() } > *` ).forEach( ( input ) => {\r\n\t\tinput.style.pointerEvents = 'none';\r\n\t});\r\n};\r\nconst unblockFormElements = () => {\r\n\tdocument.querySelector( helper.getFormSelector() ).classList.remove( 'wc-block-components-checkout-step--disabled' );\r\n\tdocument.querySelectorAll( `${ helper.getFormSelector() } > *` ).forEach( ( input ) => {\r\n\t\tinput.style.pointerEvents = '';\r\n\t});\r\n};\r\n\r\nconst dispatchInfo = ( message ) => {\r\n\thelper.dispatchInfo( {\r\n\t\tmessage,\r\n\t\tcb: () => {\r\n\t\t\tremoveSpinnerFromPlaceOrderButton();\r\n\t\t\tunblockFormElements();\r\n\t\t}\r\n\t} );\r\n};\r\n\r\nconst dispatchError = ( message ) => {\r\n\thelper.dispatchError( {\r\n\t\tmessage,\r\n\t\tcb: () => {\r\n\t\t\tremoveSpinnerFromPlaceOrderButton();\r\n\t\t\tunblockFormElements();\r\n\t\t}\r\n\t} );\r\n};\r\n\r\nconst handlePlaceOrder = () => {\r\n\tif ( helper.hasValidationErrors() ) {\r\n\t\tremoveSpinnerFromPlaceOrderButton();\r\n\t\tunblockFormElements();\r\n\r\n\t\tdocument.querySelector( '.has-error' ).scrollIntoView( {\r\n\t\t\tbehavior: 'smooth',\r\n\t\t\tblock: 'center',\r\n\t\t\tinline: 'start',\r\n\t\t} );\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ( state.settings.gateway_options.enableThreeDSecure ) {\r\n\t\taddSpinnerToPlaceOrderButton();\r\n\t\tblockFormElements();\r\n\t\tthreeDSecure( {\r\n\t\t\tstate,\r\n\t\t\thelper,\r\n\t\t\tdispatchError,\r\n\t\t\tdispatchInfo,\r\n\t\t\tplaceOrder: () => {\r\n\t\t\t\tconst paymentMethodData = window.wp.data.select( window.wc.wcBlocksData.PAYMENT_STORE_KEY ).getPaymentMethodData();\r\n\t\t\t\tpaymentMethodData.serverTransId = state.serverTransId;\r\n\r\n\t\t\t\thelper.setPaymentMethodData( paymentMethodData );\r\n\r\n\t\t\t\tstate.onSubmit();\r\n\t\t\t}\r\n\t\t} );\r\n\t} else {\r\n\t\tstate.onSubmit();\r\n\t}\r\n};\r\n","const isDifferentShippingAddress = () => {\r\n\treturn document.querySelector( '.wc-block-checkout__use-address-for-billing input[type=\"checkbox\"]' )?.checked;\r\n};\r\n\r\n/**\r\n * Get checkout billing address\r\n *\r\n * @returns {{country: *, city: *, postalCode: *, streetAddress1: *, streetAddress2: *, state: *}}\r\n */\r\nconst getBillingAddressFormData = () => {\r\n\treturn {\r\n\t\tstreetAddress1: document.querySelector( '#billing-address_1' )?.value,\r\n\t\tstreetAddress2: document.querySelector( '#billing-address_2' )?.value,\r\n\t\tcity: document.querySelector( '#billing-city' )?.value,\r\n\t\tstate: document.querySelector( '#billing-state input' )?.value,\r\n\t\tpostalCode: document.querySelector( '#billing-postcode' )?.value,\r\n\t\tcountry: document.querySelector( '#billing-country input' )?.value,\r\n\t};\r\n};\r\n\r\n/**\r\n * Get checkout shipping address\r\n *\r\n * @returns {{country, city, postalCode, streetAddress1, streetAddress2, state}}\r\n */\r\nconst getShippingAddressFormData = () => {\r\n\treturn {\r\n\t\tstreetAddress1: document.querySelector( '#shipping-address_1' )?.value,\r\n\t\tstreetAddress2: document.querySelector( '#shipping-address_2' )?.value,\r\n\t\tcity: document.querySelector( '#shipping-city' )?.value,\r\n\t\tstate: document.querySelector( '#shipping-state input' )?.value,\r\n\t\tpostalCode: document.querySelector( '#shipping-postcode' )?.value,\r\n\t\tcountry: document.querySelector( '#shipping-country input' )?.value,\r\n\t};\r\n};\r\n\r\n/**\r\n * Assists with notifying the challenge status, when the user closes the challenge window\r\n */\r\nconst cancelTransaction = () => {\r\n\twindow.parent.postMessage( { data: { \"transStatus\":\"N\" }, event: \"challengeNotification\" }, window.location.origin );\r\n};\r\n\r\n/**\r\n * 3DS Process\r\n */\r\nexport const threeDSecure = ( { state, helper, dispatchError, dispatchInfo, placeOrder } ) => {\r\n\thelper.blockOnSubmit();\r\n\tstate.settings.helper_params.order = helper.order;\r\n\r\n\tconst tokenResponse = state.tokenResponse ? JSON.stringify( state.tokenResponse ) : null;\r\n\tconst wcTokenId = document.querySelector( helper.getStoredPaymentMethodsRadioSelector() )?.value ?? 'new';\r\n\r\n\tGlobalPayments.ThreeDSecure.checkVersion( state.threedsecure.checkEnrollmentUrl, {\r\n\t\ttokenResponse,\r\n\t\twcTokenId,\r\n\t\torder: {\r\n\t\t\tid: state.settings.helper_params.order.id,\r\n\t\t\tamount: state.settings.helper_params.order.amount,\r\n\t\t\tcurrency: state.settings.helper_params.order.currency,\r\n\t\t}\r\n\t})\r\n\t.then( ( versionCheckData ) => {\r\n\t\tif ( versionCheckData.error ) {\r\n\t\t\tdispatchError( versionCheckData.message );\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif ( \"NOT_ENROLLED\" === versionCheckData.status && \"YES\" !== versionCheckData.liabilityShift ) {\r\n\t\t\tdispatchError( 'Please try again with another card.' );\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif ( \"NOT_ENROLLED\" === versionCheckData.status && \"YES\" === versionCheckData.liabilityShift ) {\r\n\t\t\tplaceOrder();\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tconst addressMatch = ! isDifferentShippingAddress();\r\n\t\tconst billingAddress = getBillingAddressFormData();\r\n\t\tconst shippingAddress = addressMatch ? billingAddress : getShippingAddressFormData();\r\n\r\n\t\tGlobalPayments.ThreeDSecure.initiateAuthentication( state.threedsecure.initiateAuthenticationUrl, {\r\n\t\t\ttokenResponse,\r\n\t\t\twcTokenId,\r\n\t\t\tversionCheckData: versionCheckData,\r\n\t\t\tchallengeWindow: {\r\n\t\t\t\twindowSize: GlobalPayments.ThreeDSecure.ChallengeWindowSize.Windowed500x600,\r\n\t\t\t\tdisplayMode: 'lightbox',\r\n\t\t\t},\r\n\t\t\torder: {\r\n\t\t\t\tid: state.settings.helper_params.order.id,\r\n\t\t\t\tamount: state.settings.helper_params.order.amount,\r\n\t\t\t\tcurrency: state.settings.helper_params.order.currency,\r\n\t\t\t\tbillingAddress: billingAddress,\r\n\t\t\t\tshippingAddress: shippingAddress,\r\n\t\t\t\taddressMatchIndicator: addressMatch,\r\n\t\t\t\tcustomerEmail: document.querySelector( '.wc-block-components-address-form__email input#email' ).value,\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then( ( authenticationData ) => {\r\n\t\t\tif ( authenticationData.error ) {\r\n\t\t\t\tdispatchError( authenticationData.message );\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tconst serverTransId = authenticationData.serverTransactionId || authenticationData.challenge.response.data.threeDSServerTransID || versionCheckData.serverTransactionId;\r\n\t\t\thelper.createInputElement( state.settings.id, 'serverTransId', serverTransId );\r\n\r\n\t\t\tstate.serverTransId = serverTransId;\r\n\r\n\t\t\tplaceOrder();\r\n\r\n\t\t\treturn true;\r\n\t\t})\r\n\t\t.catch( ( error ) => {\r\n\t\t\tconsole.error( error );\r\n\t\t\tconsole.error( error.reasons );\r\n\r\n\t\t\tdispatchError( 'Something went wrong while doing 3DS processing.' );\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\t})\r\n\t.catch( ( error ) => {\r\n\t\tconsole.error( error );\r\n\t\tconsole.error( error.reasons );\r\n\r\n\t\tdispatchError( 'Something went wrong while doing 3DS processing.' );\r\n\r\n\t\treturn false;\r\n\t});\r\n\r\n\r\n\tdocument.addEventListener( 'click', ( e ) => {\r\n\t\tif ( e.target.matches( 'img[id^=\"GlobalPayments-frame-close-\"]' ) ) {\r\n\t\t\tcancelTransaction();\r\n\t\t}\r\n\t} );\r\n\r\n\treturn false;\r\n};\r\n","import { getSetting } from '@woocommerce/settings';\r\nimport { helper as gp_helper } from \"../components/helper\";\r\nimport { useEffect } from 'react';\r\nimport { threeDSecure } from '../components/threeDSecureComponent';\r\n\r\nconst state = {\r\n\tsettings: null,\r\n\tcardForm: null,\r\n\ttokenResponse: null,\r\n\tfieldOptions: null,\r\n\tserverTransId: null,\r\n};\r\n\r\nlet helper = {};\r\nexport const Content = ( props ) => {\r\n\tconst { id, eventRegistration } = props;\r\n\r\n\tconst settings = getSetting( id + '_data', {} );\r\n\tconst paymentFields = Object.entries( settings.secure_payment_fields );\r\n\tconst { StoreNoticesContainer } = window.wc.blocksCheckout;\r\n\r\n\thelper = gp_helper( settings.helper_params );\r\n\r\n\tstate.settings = settings;\r\n\tstate.fieldOptions = settings.secure_payment_fields;\r\n\tstate.threedsecure = settings.threedsecure;\r\n\r\n\tconst { onCheckoutFail } = eventRegistration;\r\n\r\n\tuseEffect( () => {\r\n\t\tattachEventHandlers();\r\n\r\n\t\tconst unsubscribe = onCheckoutFail( () => {\r\n\t\t\tunblockFormElements();\r\n\t\t\tremoveSpinnerFromSubmitButton();\r\n\t\t} );\r\n\r\n\t\treturn () => {\r\n\t\t\tif ( ! document.querySelector( helper.getPaymentMethodRadioSelector( state.settings.id ) )?.checked ) {\r\n\t\t\t\tdocument.querySelector( helper.getSubmitButtonTargetSelector( state.settings.id ) )?.remove();\r\n\t\t\t\thelper.showPlaceOrderButton();\r\n\t\t\t}\r\n\r\n\t\t\tunsubscribe();\r\n\t\t};\r\n\t}, [ onCheckoutFail ] );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div dangerouslySetInnerHTML={{ __html: state.settings.environment_indicator }} />\r\n\t\t\t{\r\n\t\t\t\tpaymentFields.map( ( field ) =>\r\n\t\t\t\t\t<PaymentField id={ id } field={ field[1] } key={ field[0] } />\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t<StoreNoticesContainer context=\"gp-wp-context\" />\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst PaymentField = ( props ) => {\r\n\tconst { id, field } = props;\r\n\r\n\treturn (\r\n\t\t<div className={ `globalpayments ${id} ${field.class}` }>\r\n\t\t\t<label htmlFor={ `${id}-${field.class}` }>\r\n\t\t\t\t{ field.label }\r\n\t\t\t\t<span className=\"required\">*</span>\r\n\t\t\t</label>\r\n\t\t\t<div id={`${id}-${field.class}`}></div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst attachEventHandlers = () => {\r\n\t// General\r\n\tdocument.querySelector( '#order_review, #add_payment_method' )?.addEventListener( 'click', ( e ) => {\r\n\t\t\tif ( e.target.matches( '#payment-method input[type=\"radio\"]' ) ) {\r\n\t\t\t\thelper.toggleSubmitButtons();\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n\r\n\tdocument.body.addEventListener( 'checkout_error', () => {\r\n\t\tdocument.querySelector('#globalpayments_gpapi-serverTransId')?.remove();\r\n\t} );\r\n\r\n\r\n\t// Admin Pay for Order\r\n\tdocument.addEventListener( 'globalpayments_pay_order_modal_loaded', renderPaymentFields );\r\n\tdocument.addEventListener( 'globalpayments_pay_order_modal_error', ( event, message ) => {\r\n\t\thelper.showPaymentError( message );\r\n\t} );\r\n\r\n\tif ( helper.isFirstPaymentMethod( state.settings.id ) || helper.isOnlyGatewayMethodDisplayed( state.settings.id ) ) {\r\n\t\twindow.onload = () => {\r\n\t\t\trenderPaymentFields();\r\n\t\t};\r\n\t}\r\n\r\n\t// New Credit Card\r\n\tdocument.querySelector( '#radio-control-wc-payment-method-options-globalpayments_gpapi' ).addEventListener( 'change', renderPaymentFields );\r\n};\r\n\r\nconst renderPaymentFields = () => {\r\n\tconst gatewayConfig = state.settings.gateway_options;\r\n\tif ( gatewayConfig.error ) {\r\n\t\tdispatchError( gatewayConfig.message );\r\n\t}\r\n\r\n\t// ensure the submit button's parent is on the page as this is added\r\n\t// only after the initial page load\r\n\tif ( ! document.querySelector( helper.getSubmitButtonTargetSelector( state.settings.id ) ) ) {\r\n\t\thelper.createSubmitButtonTarget( state.settings.id );\r\n\t}\r\n\r\n\tconst globalPayments = GlobalPayments;\r\n\tglobalPayments.configure( gatewayConfig );\r\n\tglobalPayments.on( 'error', handleErrors);\r\n\r\n\tstate.cardForm = globalPayments.ui.form(\r\n\t\t{\r\n\t\t\tfields: getFieldConfiguration(),\r\n\t\t\tstyles: getStyleConfiguration()\r\n\t\t}\r\n\t);\r\n\r\n\tstate.cardForm.on( 'submit', 'click', () => {\r\n\t\taddSpinnerToSubmitButton();\r\n\t\tblockFormElements();\r\n\r\n\t\thelper.blockOnSubmit();\r\n\t} );\r\n\tstate.cardForm.on( 'token-success', handleResponse );\r\n\tstate.cardForm.on( 'token-error', handleErrors );\r\n\tstate.cardForm.on( 'error', handleErrors );\r\n\tstate.cardForm.on( 'card-form-validity', ( isValid ) => {\r\n\t\tif ( !isValid ) {\r\n\t\t\thelper.unblockOnError();\r\n\t\t\tremoveSpinnerFromSubmitButton();\r\n\t\t\tunblockFormElements();\r\n\t\t}\r\n\t} );\r\n\r\n\t// match the visibility of our payment form\r\n\tstate.cardForm.ready( () => {\r\n\t\thelper.toggleSubmitButtons();\r\n\t} );\r\n};\r\n\r\nconst addSpinnerToSubmitButton = () => {\r\n\tconst el = document.querySelector( helper.getSubmitButtonTargetSelector( state.settings.id ) );\r\n\tel.classList.add('wc-block-components-spinner');\r\n\tel.classList.add('wc-block-components-checkout-step--disabled');\r\n\tel.style.height = 'initial !important';\r\n\tel.style.width = 'initial !important';\r\n\tel.style.position = 'relative';\r\n};\r\n\r\nconst removeSpinnerFromSubmitButton = () => {\r\n\tconst el = document.querySelector( helper.getSubmitButtonTargetSelector( state.settings.id ) );\r\n\tel.classList.remove( 'wc-block-components-spinner' );\r\n\tel.classList.remove( 'wc-block-components-checkout-step--disabled' );\r\n\tel.style.height = 'initial !important';\r\n\tel.style.width = 'initial !important';\r\n\tel.style.position = 'relative';\r\n};\r\n\r\nconst blockFormElements = () => {\r\n\tdocument.querySelector( helper.getFormSelector() ).classList.add( 'wc-block-components-checkout-step--disabled' );\r\n\tdocument.querySelectorAll( `${ helper.getFormSelector() } > *` ).forEach( ( input ) => {\r\n\t\tinput.style.pointerEvents = 'none';\r\n\t});\r\n};\r\nconst unblockFormElements = () => {\r\n\tdocument.querySelector( helper.getFormSelector() ).classList.remove( 'wc-block-components-checkout-step--disabled' );\r\n\tdocument.querySelectorAll( `${ helper.getFormSelector() } > *` ).forEach( ( input ) => {\r\n\t\tinput.style.pointerEvents = '';\r\n\t});\r\n};\r\n\r\nconst dispatchInfo = ( message ) => {\r\n\thelper.dispatchInfo( {\r\n\t\tmessage,\r\n\t\tcb: () => {\r\n\t\t\tremoveSpinnerFromSubmitButton();\r\n\t\t\tunblockFormElements();\r\n\t\t}\r\n\t} );\r\n};\r\n\r\nconst dispatchError = ( message ) => {\r\n\thelper.dispatchError( {\r\n\t\tmessage,\r\n\t\tcb: () => {\r\n\t\t\tremoveSpinnerFromSubmitButton();\r\n\t\t\tunblockFormElements();\r\n\t\t}\r\n\t} );\r\n};\r\n\r\nconst showValidationError = ( fieldType ) => {\r\n\tdispatchError( state.settings.secure_payment_fields[fieldType].messages.validation );\r\n\r\n\thelper.unblockOnError();\r\n};\r\n\r\nconst handleErrors = ( error ) => {\r\n\tif ( ! error.reasons ) {\r\n\t\tdispatchError( 'Something went wrong. Please contact us to get assistance.' );\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tfor ( let i = 0; i < error.reasons.length; i++ ) {\r\n\t\tconst reason = error.reasons[i];\r\n\t\tswitch ( reason.code ) {\r\n\t\t\tcase 'NOT_AUTHENTICATED':\r\n\t\t\t\tdispatchError( 'We\\'re not able to process this payment. Please refresh the page and try again.' );\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tdispatchError( reason.message );\r\n\t\t}\r\n\t}\r\n};\r\n\r\nconst getFieldConfiguration = () => {\r\n\tconst fields = {\r\n\t\t'card-number': {\r\n\t\t\tplaceholder: state.fieldOptions['card-number-field'].placeholder,\r\n\t\t\ttarget: '#' + state.settings.id + '-' + state.fieldOptions['card-number-field'].class\r\n\t\t},\r\n\t\t'card-expiration': {\r\n\t\t\tplaceholder: state.fieldOptions['card-expiry-field'].placeholder,\r\n\t\t\ttarget: '#' + state.settings.id + '-' + state.fieldOptions['card-expiry-field'].class\r\n\t\t},\r\n\t\t'card-cvv': {\r\n\t\t\tplaceholder: state.fieldOptions['card-cvc-field'].placeholder,\r\n\t\t\ttarget: '#' + state.settings.id + '-' + state.fieldOptions['card-cvc-field'].class\r\n\t\t},\r\n\t\t'submit': {\r\n\t\t\ttext: getSubmitButtonText(),\r\n\t\t\ttarget: '#' + state.settings.id + '-card-submit'\r\n\t\t}\r\n\t};\r\n\tif ( state.fieldOptions.hasOwnProperty( 'card-holder-name-field' ) ) {\r\n\t\tfields[\"card-holder-name\"] = {\r\n\t\t\tplaceholder: state.fieldOptions['card-holder-name-field'].placeholder,\r\n\t\t\ttarget: '#' + state.settings.id + '-' + state.fieldOptions['card-holder-name-field'].class\r\n\t\t}\r\n\t}\r\n\treturn fields;\r\n};\r\n\r\nconst getSubmitButtonText = () => {\r\n\tconst selector = document.querySelector( helper.getPlaceOrderButtonSelector() );\r\n\treturn selector.innerText;\r\n};\r\n\r\nconst getStyleConfiguration = () => {\r\n\treturn JSON.parse( state.settings.field_styles );\r\n};\r\n\r\nconst handleResponse = ( response ) => {\r\n\tif ( helper.hasValidationErrors() ) {\r\n\t\tremoveSpinnerFromSubmitButton();\r\n\t\tunblockFormElements();\r\n\r\n\t\tdocument.querySelector( '.has-error' )?.scrollIntoView( {\r\n\t\t\tbehavior: 'smooth',\r\n\t\t\tblock: 'center',\r\n\t\t\tinline: 'start',\r\n\t\t} );\r\n\t\t// Use place order here to trigger fields validation error message\r\n\t\thelper.placeOrder();\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ( ! validateTokenResponse( response ) ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tstate.tokenResponse = response;\r\n\r\n\thandlePlaceOrder();\r\n};\r\n\r\nconst handlePlaceOrder = () => {\r\n\tif ( state.settings.gateway_options.enableThreeDSecure ) {\r\n\t\tthreeDSecure( {\r\n\t\t\tstate,\r\n\t\t\thelper,\r\n\t\t\tdispatchError,\r\n\t\t\tdispatchInfo,\r\n\t\t\tplaceOrder\r\n\t\t} );\r\n\t} else {\r\n\t\tplaceOrder();\r\n\t}\r\n};\r\n\r\nconst placeOrder = () => {\r\n\tif (typeof state.cardForm.frames[ \"card-cvv\" ].getCvv === 'function' ) {\r\n\t\tstate.cardForm.frames[ \"card-cvv\" ].getCvv().then( ( cvvVal ) => {\r\n\r\n\t\t\t/**\r\n\t\t\t * CVV; needed for TransIT gateway processing only\r\n\t\t\t *\r\n\t\t\t * @type {string}\r\n\t\t\t */\r\n\t\t\tif ( state.tokenResponse ) {\r\n\t\t\t\tstate.tokenResponse.details.cardSecurityCode = cvvVal;\r\n\t\t\t}\r\n\r\n\t\t\tuseTokenToPlaceOrder();\r\n\t\t});\r\n\t} else {\r\n\t\tuseTokenToPlaceOrder();\r\n\t}\r\n}\r\n\r\nconst validateTokenResponse = ( response ) => {\r\n\tif ( response.details ) {\r\n\t\tconst expirationDate = new Date( response.details.expiryYear, response.details.expiryMonth - 1 );\r\n\t\tconst now = new Date();\r\n\t\tconst thisMonth = new Date( now.getFullYear(), now.getMonth() );\r\n\r\n\t\tif ( ! response.details.expiryYear || ! response.details.expiryMonth || expirationDate < thisMonth ) {\r\n\t\t\tshowValidationError( 'card-expiry-field' );\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tif ( response.details && ! response.details.cardSecurityCode ) {\r\n\t\tshowValidationError( 'card-cvc-field' );\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n};\r\n\r\nconst useTokenToPlaceOrder = () => {\r\n\tconst paymentMethodData = {\r\n\t\ttoken_response: JSON.stringify( state.tokenResponse ),\r\n\t};\r\n\r\n\tif ( state.serverTransId ) {\r\n\t\tpaymentMethodData.serverTransId = state.serverTransId\r\n\t}\r\n\r\n\thelper.setPaymentMethodData( paymentMethodData );\r\n\r\n\thelper.placeOrder();\r\n};","import { registerPaymentMethod } from '@woocommerce/blocks-registry';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport { getSetting } from '@woocommerce/settings';\r\nimport { SavedTokenComponent } from \"../components/savedTokenComponent\";\r\n\r\nexport const register = ( props ) => {\r\n\tconst { id, Content } = props;\r\n\tconst settings = getSetting( id + '_data', {} );\r\n\tif ( Object.entries(settings).length === 0 ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst label = decodeEntities( settings.title );\r\n\tconst Label = ( props ) => {\r\n\t\tconst { PaymentMethodLabel } = props.components;\r\n\t\treturn <PaymentMethodLabel text={ label } />;\r\n\t};\r\n\r\n\tconst PaymentMethod = {\r\n\t\tname: id,\r\n\t\tlabel: <Label />,\r\n\t\tcontent: Content,\r\n\t\tedit: Content,\r\n\t\tsavedTokenComponent: <SavedTokenComponent id={ id }/>,\r\n\t\tcanMakePayment: () => {\r\n\t\t\tif ( settings.gateway_options.hide && settings.gateway_options.error ) {\r\n\t\t\t\tconsole.error( settings.gateway_options.message );\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tariaLabel: label,\r\n\t\tsupports: {\r\n\t\t\tfeatures: settings.supports,\r\n\t\t\tshowSaveOption: settings.allow_card_saving\r\n\t\t},\r\n\t};\r\n\r\n\tregisterPaymentMethod( PaymentMethod );\r\n};\r\n","module.exports = window[\"React\"];","module.exports = window[\"wc\"][\"wcBlocksRegistry\"];","module.exports = window[\"wc\"][\"wcSettings\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { register } from '../utils/register';\r\nimport { Content } from './component';\r\n\r\nconst gatewayIds = [ 'globalpayments_gpapi' ];\r\n\r\nfor ( let gatewayId of gatewayIds ) {\r\n\tconst props = {\r\n\t\tid: gatewayId,\r\n\t\tContent: <Content id={ gatewayId } />\r\n\t}\r\n\tregister( props );\r\n}\r\n"],"names":["getElement","selector","document","querySelector","getAllElements","querySelectorAll","addClass","element","className","classList","add","removeClass","remove","hideElement","style","display","showElement","params","getOrderInfo","helper_functions","blockOnSubmit","fetch","orderInfoUrl","then","res","json","result","order","message","catch","jqXHR","textStatus","errorThrown","console","log","finally","unblockOnError","helper","helper_params","getPlaceOrderButtonSelector","getSubmitButtonTargetSelector","id","getPaymentMethodRadioSelector","getStoredPaymentMethodsRadioSelector","isOnlyGatewayMethodDisplayed","list","gateway","includes","length","isFirstPaymentMethod","value","toggleSubmitButtons","selectedPaymentGatewayId","hide","hidePlaceOrderButton","toggle","showPlaceOrderButton","submitButtonTarget","savedCardsAvailable","newSavedCardSelected","getFormSelector","createInputElement","name","inputElement","getElementById","createElement","type","appendChild","createSubmitButtonTarget","el","replace","elem","parentNode","insertBefore","nextSibling","placeOrder","originalSubmit","click","e","submit","showPaymentError","form","indexOf","prepend","animate","scrollTop","offsetTop","body","dispatchEvent","Event","$form","form_data","data","block","overlayCSS","background","opacity","unblock","hidePaymentMethod","setPaymentMethodData","window","wp","dispatch","wc","wcBlocksData","PAYMENT_STORE_KEY","__internalSetPaymentMethodData","dispatchInfo","context","cb","createInfoNotice","dispatchError","createErrorNotice","hasValidationErrors","select","VALIDATION_STORE_KEY","getSetting","gp_helper","useEffect","threeDSecure","state","settings","onSubmit","serverTransId","SavedTokenComponent","props","eventRegistration","threedsecure","onCheckoutFail","onload","attachEventHandlers","unsubscribeOnCheckoutFail","unblockFormElements","removeSpinnerFromPlaceOrderButton","StoreNoticesContainer","blocksCheckout","addEventListener","preventDefault","stopImmediatePropagation","handlePlaceOrder","addSpinnerToPlaceOrderButton","span","blockFormElements","forEach","input","pointerEvents","scrollIntoView","behavior","inline","gateway_options","enableThreeDSecure","paymentMethodData","getPaymentMethodData","isDifferentShippingAddress","checked","getBillingAddressFormData","streetAddress1","streetAddress2","city","postalCode","country","getShippingAddressFormData","cancelTransaction","parent","postMessage","event","location","origin","_document$querySelect","tokenResponse","JSON","stringify","wcTokenId","GlobalPayments","ThreeDSecure","checkVersion","checkEnrollmentUrl","amount","currency","versionCheckData","error","status","liabilityShift","addressMatch","billingAddress","shippingAddress","initiateAuthentication","initiateAuthenticationUrl","challengeWindow","windowSize","ChallengeWindowSize","Windowed500x600","displayMode","addressMatchIndicator","customerEmail","authenticationData","serverTransactionId","challenge","response","threeDSServerTransID","reasons","target","matches","cardForm","fieldOptions","Content","paymentFields","Object","entries","secure_payment_fields","unsubscribe","removeSpinnerFromSubmitButton","Fragment","dangerouslySetInnerHTML","__html","environment_indicator","map","field","PaymentField","key","class","htmlFor","label","renderPaymentFields","gatewayConfig","globalPayments","configure","on","handleErrors","ui","fields","getFieldConfiguration","styles","getStyleConfiguration","addSpinnerToSubmitButton","handleResponse","isValid","ready","height","width","position","showValidationError","fieldType","messages","validation","i","reason","code","placeholder","text","getSubmitButtonText","hasOwnProperty","innerText","parse","field_styles","validateTokenResponse","frames","getCvv","cvvVal","details","cardSecurityCode","useTokenToPlaceOrder","expirationDate","Date","expiryYear","expiryMonth","now","thisMonth","getFullYear","getMonth","token_response","registerPaymentMethod","decodeEntities","register","title","Label","PaymentMethodLabel","components","PaymentMethod","content","edit","savedTokenComponent","canMakePayment","ariaLabel","supports","features","showSaveOption","allow_card_saving","gatewayIds","gatewayId"],"sourceRoot":""}